# Linux的常见命令

## 学习的必要性

* 在职场中，大量的**服务器维护工作**都是在**远程通过SSH客户端**来完成的，并没有图形界面，所有的维护工作都需要通过命令来完成
* 后端程序员必须要或多或少掌握一些常见的Linux命令

## 常见的命令

|      命令      |       对应英文       |                        作用                         |
| :------------: | :------------------: | :-------------------------------------------------: |
|       ls       |         list         |                查看当前文件夹的内容                 |
|      pwd       | print work directory |                 查看当前所在文件夹                  |
|  cd  <目录名>  |   change directory   |                     切换文件夹                      |
| touch <文件名> |        touch         | 如果文件不存在，新建文件;否则修改文件的末次修改日期 |
| mkdir <目录名> |    make directory    |                      创建目录                       |
|  rm <文件名>   |        remove        |                 删除指定文件或目录                  |
|     clear      |        clear         |                        清屏                         |

> [`Ctrl+C`](#查看或配置网卡信息)是退出选择，取消执行当前选择的命令

### `ls`命令扩展

| 参数 | 含义                                         |
| ---- | -------------------------------------------- |
| -a   | 显示指定目录下所有子目录与文件，包含隐藏文件 |
| -l   | 以列表方式显示文件的详细信息                 |
| -h   | 配合-l以人性化的方式显示文件大小             |

> 配合使用：`ls -lh`

### `cd`命令扩展

| 命令      |                  含义                  |
| :-------- | :------------------------------------: |
| cd        | 切换到当前用户的主目录(/home/用户目录) |
| cd ~      | 切换到当前用户的主目录(/home/用户目录) |
| cd .      |           保持在当前目录不变           |
| ==cd ..== |             切换到上级目录             |
| ==cd -==  |    可以在最近2次工作目录间来回切换     |

### `mkdir`命令扩展

* 创建多个层层目录（想象套娃）：`mkdir -p a1/b1/c1/d1`

### `rm`命令扩展

| 参数 | 含义                                                         |
| ---- | ------------------------------------------------------------ |
| -f   | 强制删除，忽略不存在的文件，无需提示                         |
| -r   | 递归删除目录下的内容（即删除多级目录），删除**文件夹**时**必须**加此参数 |

### `tree`命令

以树状图列出文件目录结构

### `cp`命令

* 将文件或目录复制到另一个文件或目录中

### cat命令

* 查看文件内容、创建文件、文件合并、追加文件等
* 一次显示所有内容，适合显示**内容较少**的文件

### more命令

* 分屏显示文件内容，每次只显示一页内容，适合显示**内容较多**的文件

| 操作键 | 功能                 |
| ------ | -------------------- |
| 空格键 | 显示手册页的下一屏   |
| 回车键 | 一次滚动手册页的一行 |
| b      | 回滚一页             |
| f      | 前滚一页             |
| q      | 退出                 |
| /word  | 搜索`word`字符串     |

### `grep`命令

* `grep`命令是一个强大的文本搜索工具，使用语法：`grep (-n) <搜索的字符> <搜索的文件>`

| 选项 | 含义                       |
| ---- | -------------------------- |
| -n   | 显示匹配行及行号           |
| -v   | 显示不包含匹配文本的所有行 |
| -i   | 忽略大小写                 |

**两种常见的模式：**

|               |                            |
| ------------- | -------------------------- |
| ^<搜索的字符> | 搜索以<搜索的字符>开头的行 |
| <搜索的字符>$ | 搜索以<搜索的字符>结束的行 |

> 如果搜索字符含空格，需用`""`，如`grep -i "Hello World" a.txt`

### 其他命令

#### echo命令和重定向`>`,`>>` 

* echo一般和重定向配合使用，如果单独使用的话，如：`echo Hello World`就是在终端上显示`Hello World`
* `>`表示输出，会覆盖原有的内容；`>>`表示追加，会将内容追加到已有文件的末尾

示例：命令`echo Hello World >> a`，表示将`Hello World`追加到文件`a`的末尾

#### 管道`|`

* 使用语法：`命令1 | 命令2`

* 将一个命令通过管道`|`输出，作为另一个命令的输入，如：`ls | cat`将显示的目录作为`cat`命令的输入。

* 管道常常涉及命令：`more`、`grep`

# 远程管理的常用命令

## `shutdown`命令

* 作用：重新启动系统/安全关闭系统
* 语法：`shutdown <参数> <时间>`

>* 参数`-r`代表重新启动，`-c`代表取消启动计划，不指定参数和时间表示1分钟之后关闭系统
>* 时间可以是`20:18`，也可以是`+10`表示10分钟后执行，`now`表示现在执行
>
>* 远程运行维护服务器的时候，应该重新启动系统

## 查看或配置网卡信息

| 命令          | 对应英文                      | 作用                              |
| ------------- | ----------------------------- | --------------------------------- |
| ifconfig      | configure a network interface | 查看/配置计算机当前的网卡配置信息 |
| ping <ip地址> | ping                          | 检测到目标IP地址的连接是否正常    |

* [管道组合命令](#管道|):`ifconfig | grep inet`查看网卡对应的**IP地址**
* `ping`一般用于检测当前计算机到目标计算机之间的网络**是否通畅，数值越大，速度越慢**

> * `ping`的原理：给目标`IP`地址发送一个数据包，对方就要返回一个数据包，根据返回的数据包以及时间，我们可以确定目标主机的存在
> * 绝大多数可通过[`Ctrc+C`](#常见的命令)终止程序执行

## 远程登录和复制文件

### ssh基础

在Linux中，我们可以通过**SSH客户端**连接到运行了**SSH服务器**的远程机器上

``` mermaid
graph LR
A[SSH客户端]----->B[SSH服务器]
```
* 数据通过**加密**并且**压缩**传输，这样可以防止信息泄露，加快传输速率
* SSH是目前比较可靠，**专为远程登录会话和其他网络服务**提供安全性的协议
  * 利用SSH协议可以有效防止远程管理过程中的信息泄露
  * 通过SSH协议可以对所有传输的数据进行加密，也能防止DNS欺骗和IP欺骗


> * IP地址：通过IP地址找到网络上的计算机
> * 域名：如`www.baidu.com`IP地址的别名
> * 端口号：通过端口号可以找到计算机上运行的应用程序

* SSH服务器的默认端口号是22，使用默认端口号，连接时可以省略

* 常见端口号

| 服务      | 端口号 |
| --------- | ------ |
| SSH服务器 | 22     |
| Web服务器 | 80     |
| HTTPS     | 443    |
| FTP服务器 | 21     |

### 远程登录

语法：`ssh (-p port) user@remote`

* `user`为远端用户名，不指定默认为当前用户
* `remote`是远端机器地址，可以是**[IP/域名等](#查看或配置网卡信息)**(==点击链接了解查看远端IP方式==)
* `port`是SSH Server 监听的端口号，如果不指定默认为22

> * 使用`exit`退出当前用户的登录
> * 在`Windows`系统中，需要安装`puTTY`或`XShell`才能使用

### 复制文件（`scp`命令）

* 适用于本地端和远端的文件互传

* 语法格式与`ssh`基本一致，但是指定端口使用大写字母`-P`

* **示例：**

  * 把本地当前目录下的`01.py`文件复制到远程`home`目录下的`Desktop/01.py`:

    `scp -P <端口号> 01.py user@remote:Desktop/01.py`

  * 把远程`home`目录下的`Desktop/01.py`文件复制到本地当前目录下的`01.py`:

    `scp -P <端口号> user@remote:Desktop/01.py 01.py `

  ---

  [==有关-r==](#`rm`命令扩展)

  * 把当前目录下的`demo`文件夹复制到远程`home`目录下的`Desktop`：

    `scp -r demo user@remote:Desktop`

  * 把远程`home`目录下的`Desktop`复制到的当前目录下`demo`文件夹：

  * `scp -r user@remote:Desktop demo`


## ssh高级

### [免密登录](https://blog.csdn.net/jeikerxiao/article/details/84105529?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522165219950516781435430794%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=165219950516781435430794&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-84105529-null-null.142^v9^control,157^v4^control&utm_term=SSH%E5%85%8D%E5%AF%86%E7%99%BB%E5%BD%95&spm=1018.2226.3001.4187)

### [配置别名](https://blog.csdn.net/wjlwangluo/article/details/111144786?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522165219978416781435479071%2522%252C%2522scm%2522%253A%252220140713.130102334.pc%255Fall.%2522%257D&request_id=165219978416781435479071&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~first_rank_ecpm_v1~rank_v31_ecpm-2-111144786-null-null.142^v9^control,157^v4^control&utm_term=SSH%E7%99%BB%E5%BD%95%E8%AE%BE%E7%BD%AE%E5%88%AB%E5%90%8D&spm=1018.2226.3001.4187)

### [ssh免密登录 + ssh别名设置](https://blog.csdn.net/cynthrial/article/details/82319498?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522165219978416781435494102%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=165219978416781435494102&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-82319498-null-null.142^v9^control,157^v4^control&utm_term=SSH%E7%99%BB%E5%BD%95%E8%AE%BE%E7%BD%AE%E5%88%AB%E5%90%8D&spm=1018.2226.3001.4187)

# 用户权限相关命令



# 系统信息相关命令

# 使用的小技巧

## 终端窗口

* 终端窗口的放大：`Ctrl shift =`
* 终端窗口的缩小：`Ctrl -`

## 命令

* 自动补全：在敲出`文件或目录或命令`的前几个字母后，按下`Tab`
  * 没有歧义，自动补全
  * 有歧义，再按`Tab	`，系统会提示存在的命令

